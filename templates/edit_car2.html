{% extends "base.html" %} {% block title %}Home{% endblock %} {% block content %}
<link rel="stylesheet" type="text/css" href="../static/car_info.css">
<link rel="stylesheet" href="../static/jquery-msgpopup.css" />

<!-- Include the JavaScript file -->
<script src="../static/index.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="../static/jquery-msgpopup.js"></script>

<body class="edit-car">

    <!-- <h1 align="center">Edit car</h1> -->
    <form method="POST" action="/edit/{{car.id}}" id="edit-car-form">

        <h3 class="h3title" align="center">CAR DETAILS</h3>

        <!-- Brand Dropdown -->
        <div class="elem-group">
            <label for="brand">Brand:</label>
            <select id="brand" name="brand">
                <!-- The brand options will be dynamically generated in JavaScript -->
            </select>
        </div>

        <!-- Model Dropdown -->
        <div class="elem-group" id="modelGroup">
            <label for="model">Model:</label>
            <select id="model" name="model">
                <option value="">Select Model</option>
            </select>
        </div>

        <!-- Year Dropdown -->
        <div class="elem-group">
            <label for="year">Year:</label>
            <select id="year" name="year">
                <!-- Generate options dynamically with a loop -->
                {% set current_year = 2025 %}
                {% set start_year = 1886 %}
                {% for year in range(current_year, start_year - 1, -1) %}
                <option value="{{ year }}" {% if car.year==year %}selected{% endif %}>{{ year }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Fuel Type Dropdown -->
        <div class="elem-group inlined">
            <label for="fuel_type">Fuel Type: </label>
            <select id="fuel_type" name="fuel_type">
                <option value="PETROL" {% if car.fuel_type=="PETROL" %}selected{% endif %}>Petrol</option>
                <option value="DIESEL" {% if car.fuel_type=="DIESEL" %}selected{% endif %}>Diesel</option>
                <option value="ELECTRIC" {% if car.fuel_type=="ELECTRIC" %}selected{% endif %}>Electric</option>
                <option value="HYBRID" {% if car.fuel_type=="HYBRID" %}selected{% endif %}>Hybrid</option>
                <option value="PHEV" {% if car.fuel_type=="PHEV" %}selected{% endif %}>PHEV</option>
                <option value="HYDROGEN" {% if car.fuel_type=="HYDROGEN" %}selected{% endif %}>Hydrogen</option>
                <option value="LPG" {% if car.fuel_type=="LPG" %}selected{% endif %}>LPG</option>
                <option value="CNG" {% if car.fuel_type=="CNG" %}selected{% endif %}>CNG</option>
            </select>
        </div>


        <!-- EURO STANDARD -->
        <div class="elem-group inlined">
            <label for="euro_standard ">EURO Standard: </label>
            <select id="euro_standard" name="euro_standard">
                <option value="Euro 0" {% if car.euro_standard=="Euro 0" %}selected{% endif %}>Euro 0</option>
                <option value="Euro 1" {% if car.euro_standard=="Euro 1" %}selected{% endif %}>Euro 1</option>
                <option value="Euro 2" {% if car.euro_standard=="Euro 2" %}selected{% endif %}>Euro 2</option>
                <option value="Euro 3" {% if car.euro_standard=="Euro 3" %}selected{% endif %}>Euro 3</option>
                <option value="Euro 4" {% if car.euro_standard=="Euro 4" %}selected{% endif %}>Euro 4</option>
                <option value="Euro 5" {% if car.euro_standard=="Euro 5" %}selected{% endif %}>Euro 5</option>
                <option value="Euro 6" {% if car.euro_standard=="Euro 6" %}selected{% endif %}>Euro 6</option>
                <option value="Euro E" {% if car.euro_standard=="Euro E" %}selected{% endif %}>Zero emission</option>
            </select>
        </div>

        <!-- REGISTRATION COUNTRY -->
        <div class="elem-group">
            <label for="registration_country">Registration Country:</label>
            <select id="registration_country" name="registration_country">
                <option value="">Select Country</option>
                <option value="Albania" {% if car.registration_country=="Albania" %}selected{% endif %}>Albania</option>
                <option value="Andorra" {% if car.registration_country=="Andorra" %}selected{% endif %}>Andorra</option>
                <option value="Austria" {% if car.registration_country=="Austria" %}selected{% endif %}>Austria</option>
                <option value="Belarus" {% if car.registration_country=="Belarus" %}selected{% endif %}>Belarus</option>
                <option value="Belgium" {% if car.registration_country=="Belgium" %}selected{% endif %}>Belgium</option>
                <option value="Bulgaria" {% if car.registration_country=="Bulgaria" %}selected{% endif %}>Bulgaria
                </option>
                <option value="Croatia" {% if car.registration_country=="Croatia" %}selected{% endif %}>Croatia</option>
                <option value="Cyprus" {% if car.registration_country=="Cyprus" %}selected{% endif %}>Cyprus</option>
                <option value="Czech Republic" {% if car.registration_country=="Czech Republic" %}selected{% endif %}>
                    Czech Republic</option>
                <option value="Denmark" {% if car.registration_country=="Denmark" %}selected{% endif %}>Denmark</option>
                <option value="Estonia" {% if car.registration_country=="Estonia" %}selected{% endif %}>Estonia</option>
                <option value="Finland" {% if car.registration_country=="Finland" %}selected{% endif %}>Finland</option>
                <option value="France" {% if car.registration_country=="France" %}selected{% endif %}>France</option>
                <option value="Germany" {% if car.registration_country=="Germany" %}selected{% endif %}>Germany</option>
                <option value="Greece" {% if car.registration_country=="Greece" %}selected{% endif %}>Greece</option>
                <option value="Hungary" {% if car.registration_country=="Hungary" %}selected{% endif %}>Hungary</option>
                <option value="Iceland" {% if car.registration_country=="Iceland" %}selected{% endif %}>Iceland</option>
                <option value="Ireland" {% if car.registration_country=="Ireland" %}selected{% endif %}>Ireland</option>
                <option value="Italy" {% if car.registration_country=="Italy" %}selected{% endif %}>Italy</option>
                <option value="Lithuania" {% if car.registration_country=="Lithuania" %}selected{% endif %}>Lithuania
                </option>
                <option value="Luxembourg" {% if car.registration_country=="Luxembourg" %}selected{% endif %}>Luxembourg
                </option>
                <option value="Malta" {% if car.registration_country=="Malta" %}selected{% endif %}>Malta</option>
                <option value="Moldova" {% if car.registration_country=="Moldova" %}selected{% endif %}>Moldova</option>
                <option value="Monaco" {% if car.registration_country=="Monaco" %}selected{% endif %}>Monaco</option>
                <option value="Montenegro" {% if car.registration_country=="Montenegro" %}selected{% endif %}>Montenegro
                </option>
                <option value="Netherlands" {% if car.registration_country=="Netherlands" %}selected{% endif %}>
                    Netherlands</option>
                <option value="Norway" {% if car.registration_country=="Norway" %}selected{% endif %}>Norway</option>
                <option value="Poland" {% if car.registration_country=="Poland" %}selected{% endif %}>Poland</option>
                <option value="Portugal" {% if car.registration_country=="Portugal" %}selected{% endif %}>Portugal
                </option>
                <option value="Romania" {% if car.registration_country=="Romania" %}selected{% endif %}>Romania</option>
                <option value="Russia" {% if car.registration_country=="Russia" %}selected{% endif %}>Russia</option>
                <option value="Serbia" {% if car.registration_country=="Serbia" %}selected{% endif %}>Serbia</option>
                <option value="Slovakia" {% if car.registration_country=="Slovakia" %}selected{% endif %}>Slovakia
                </option>
                <option value="Slovenia" {% if car.registration_country=="Slovenia" %}selected{% endif %}>Slovenia
                </option>
                <option value="Spain" {% if car.registration_country=="Spain" %}selected{% endif %}>Spain</option>
                <option value="Sweden" {% if car.registration_country=="Sweden" %}selected{% endif %}>Sweden</option>
                <option value="Switzerland" {% if car.registration_country=="Switzerland" %}selected{% endif %}>
                    Switzerland</option>
                <option value="Turkey" {% if car.registration_country=="Turkey" %}selected{% endif %}>Turkey</option>
                <option value="Ukraine" {% if car.registration_country=="Ukraine" %}selected{% endif %}>Ukraine</option>
                <option value="United Kingdom" {% if car.registration_country=="United Kingdom" %}selected{% endif %}>
                    United Kingdom</option>
                <option value="Vatican City" {% if car.registration_country=="Vatican City" %}selected{% endif %}>
                    Vatican City</option>
            </select>
        </div>



        <!-- Has DPF Checkbox -->
        <div class="elem-group inlined custom-checkbox"><input type="checkbox" id="has_dpf" name="has_dpf" value="true"
                {% if car.dpf %}checked{% endif %}>
        </div>

        <div class="elem-group inlined"> <label for="has_dpf">DPF/Catalytic converter </label></div>


        <br />

        <h4 class="h4title" align="center">SELECT REGISTRATIONS</h4>

        <!-- Add a span to display the selected registration -->
        <div id="selected-registrations"></div>

        <div class="text-center mt-3">
            <button type="button" class="text-center mt-3 add-button" onclick="showView1()">
                <img class src="../static/general/icons8-plus-math-24.png" alt="">
            </button>
        </div>

        <div class="elem-group">

            <!-- View 1 -->
            <div class="tab options" id="view1">
                <h2>Country: </h2>

                <input type="radio" name="reg-country" value="belgium" id="belgium-radio"
                    onclick="showOptionsPanel('belgium')">
                <label class="clickable-label" for="belgium-radio">Belgium</label>

                <input type="radio" name="reg-country" value="bulgaria" id="bulgaria-radio"
                    onclick="showOptionsPanel('bulgaria')">
                <label class="clickable-label" for="bulgaria-radio">Bulgaria</label>

                <input type="radio" name="reg-country" value="denmark" id="denmark-radio"
                    onclick="showOptionsPanel('denmark')">
                <label class="clickable-label" for="denmark-radio">Denmark</label>

                <input type="radio" name="reg-country" value="france" id="france-radio"
                    onclick="showOptionsPanel('france')">
                <label class="clickable-label" for="france-radio">France</label>

                <input type="radio" name="reg-country" value="germany" id="germany-radio"
                    onclick="showOptionsPanel('germany')">
                <label class="clickable-label" for="germany-radio">Germany</label>

                <!-- <input type="radio" name="reg-country" value="netherlands" id="netherlands-radio"
                    onclick="showOptionsPanel('netherlands')">
                <label class="clickable-label" for="netherlands-radio">Netherlands</label> -->
                <!-- 
                <input type="radio" name="reg-country" value="poland" id="poland-radio"
                    onclick="showOptionsPanel('poland')">
                <label class="clickable-label" for="poland-radio">Poland</label> -->

                <input type="radio" name="reg-country" value="spain" id="spain-radio"
                    onclick="showOptionsPanel('spain')">
                <label class="clickable-label" for="spain-radio">Spain</label>

                <input type="radio" name="reg-country" value="united-kingdom" id="united-kingdom-radio"
                    onclick="showOptionsPanel('united-kingdom')">
                <label class="clickable-label" for="united-kingdom-radio">United Kingdom</label>

            </div>

            <!-- View 2-->

            <!-- Belgium -->
            <div id="belgium-options" class="tab options" style="display: none;">
                <label>Select Digital Registration:</label><br>
                <input type="checkbox" id="Antwerp/Ghent" name="Antwerp/Ghent" value="Antwerp/Ghent">
                <label class="clickable-label" for="Antwerp/Ghent">Antwerp/Ghent</label><br>

                <input type="checkbox" id="Brussels" name="Brussels" value="Brussels">
                <label class="clickable-label" for="Brussels">Brussels</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('Belgium', getSelectedRegistration('belgium-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>
            <!-- Denmark -->
            <div id="denmark-options" class="tab options" style="display: none;">
                <label>Select Digital Registration:</label><br>
                <input type="checkbox" id="Aalborg" name="Aalborg" value="Aalborg">
                <label class="clickable-label" for="Aalborg">Aalborg</label><br>

                <input type="checkbox" id="Aarhus" name="Aarhus" value="Aarhus">
                <label class="clickable-label" for="Aarhus">Aarhus</label><br>

                <input type="checkbox" id="Copenhagen" name="Copenhagen" value="Copenhagen">
                <label class="clickable-label" for="Copenhagen">Copenhagen</label><br>

                <input type="checkbox" id="Odense" name="Odense" value="Odense">
                <label class="clickable-label" for="Odense">Odense</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('Denmark', getSelectedRegistration('denmark-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>


            <!-- France -->
            <div id="france-options" class="tab options" style="display: none;">
                <!-- Add France-specific options here -->
                <label>Select Crit'Air Sticker:</label><br>
                <input type="radio" id="critair-1" name="critair" value="Crit Air 1">
                <label class="clickable-label" for="critair-1">Crit'Air 1</label><br>
                <input type="radio" id="critair-2" name="critair" value="Crit Air 2">
                <label class="clickable-label" for="critair-2">Crit'Air 2</label><br>
                <input type="radio" id="critair-3" name="critair" value="Crit Air 3">
                <label class="clickable-label" for="critair-3">Crit'Air 3</label><br>
                <input type="radio" id="critair-4" name="critair" value="Crit Air 4">
                <label class="clickable-label" for="critair-4">Crit'Air 4</label><br>
                <input type="radio" id="critair-5" name="critair" value="Crit Air 5">
                <label class="clickable-label" for="critair-5">Crit'Air 5</label><br>
                <input type="radio" id="critair-E" name="critair" value="Crit Air E">
                <label class="clickable-label" for="critair-E">Crit'Air E</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('France', getSelectedRegistration('france-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>

            <div id="germany-options" class="tab options" style="display: none;">
                <!-- Add Germany-specific options here -->
                <label>Select Umweltplakette:</label><br>
                <input type="radio" id="green" name="german-sticker" value="Green Umweltplakette - 4">
                <label class="clickable-label" for="green">Green Umweltplakette - 4</label><br>
                <input type="radio" id="yellow" name="german-sticker" value="Yellow Umweltplakette - 3">
                <label class="clickable-label" for="yellow">Yellow Umweltplakette - 3</label><br>
                <input type="radio" id="red" name="german-sticker" value="Red Umweltplakette - 2">
                <label class="clickable-label" for="red">Red Umweltplakette - 2</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('Germany', getSelectedRegistration('germany-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>


            <!-- United Kingdom -->
            <div id="united-kingdom-options" class="tab options" style="display: none;">
                <label>Select Digital Registration:</label><br>
                <input type="checkbox" id="Aberdeen" name="Aberdeen" value="Aberdeen">
                <label class="clickable-label" for="Aberdeen">Aberdeen</label><br>

                <input type="checkbox" id="Birmingham" name="Birmingham" value="Birmingham">
                <label class="clickable-label" for="Birmingham">Birmingham</label><br>

                <input type="checkbox" id="Bristol" name="Bristol" value="Bristol">
                <label class="clickable-label" for="Bristol">Bristol</label><br>

                <input type="checkbox" id="Dundee" name="Dundee" value="Dundee">
                <label class="clickable-label" for="Dundee">Dundee</label><br>

                <input type="checkbox" id="Edinburgh" name="Edinburgh" value="Edinburgh">
                <label class="clickable-label" for="Edinburgh">Edinburgh</label><br>

                <input type="checkbox" id="Glasgow" name="Glasgow" value="Glasgow">
                <label class="clickable-label" for="Glasgow">Glasgow</label><br>

                <input type="checkbox" id="London" name="London" value="London">
                <label class="clickable-label" for="London">London</label><br>

                <input type="checkbox" id="Portsmouth" name="Portsmouth" value="Portsmouth">
                <label class="clickable-label" for="Portsmouth">Portsmouth</label><br>

                <input type="checkbox" id="Sheffield" name="Sheffield" value="Sheffield">
                <label class="clickable-label" for="Sheffield">Sheffield</label><br>

                <input type="checkbox" id="New Castle" name="New Castle" value="New Castle">
                <label class="clickable-label" for="New Castle">New Castle</label><br>

                <input type="checkbox" id="Manchester" name="Manchester" value="Manchester">
                <label class="clickable-label" for="Manchester">Manchester</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('United Kingdom', getSelectedRegistration('united-kingdom-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>

            <!-- Netherlands -->
            <div id="netherlands-options" class="tab options" style="display: none;">
                <label>Select Digital Registration:</label><br>
                <input type="checkbox" id="Amsterdam" name="Amsterdam" value="Amsterdam">
                <label class="clickable-label" for="Amsterdam">Amsterdam</label><br>

                <input type="checkbox" id="Arnhem" name="Arnhem" value="Arnhem">
                <label class="clickable-label" for="Arnhem">Arnhem</label><br>

                <input type="checkbox" id="The Hague" name="The Hague" value="The Hague">
                <label class="clickable-label" for="The Hague">The Hague</label><br>

                <input type="checkbox" id="Utrecht" name="Utrecht" value="Utrecht">
                <label class="clickable-label" for="Utrecht">Utrecht</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('Netherlands', getSelectedRegistration('netherlands-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>

            <!-- Poland -->
            <div id="poland-options" class="tab options" style="display: none;">
                <label>Select Sticker:</label><br>
                <input type="checkbox" id="Krakow" name="Krakow" value="Krakow">
                <label class="clickable-label" for="Krakow">Krakow</label><br>

                <input type="checkbox" id="Warsaw" name="Warsaw" value="Warsaw">
                <label class="clickable-label" for="Warsaw">Warsaw</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('Poland', getSelectedRegistration('poland-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>

            <!-- Spain -->
            <div id="spain-options" class="tab options" style="display: none;">
                <label>Select Sticker:</label><br>
                <input type="radio" id="B" name="distintivo_ambiental" value="Distintivo Ambiental B">
                <label class="clickable-label" for="B">B</label><br>

                <input type="radio" id="C" name="distintivo_ambiental" value="Distintivo Ambiental C">
                <label class="clickable-label" for="C">C</label><br>

                <input type="radio" id="ECO" name="distintivo_ambiental" value="Distintivo Ambiental ECO">
                <label class="clickable-label" for="ECO">ECO</label><br>

                <input type="radio" id="Zero" name="distintivo_ambiental" value="Distintivo Ambiental Zero">
                <label class="clickable-label" for="Zero">Zero (Zero emission)</label><br>

                <input type="radio" id="Barcelona" name="distintivo_ambiental" value="Barcelona">
                <label class="clickable-label" for="Barcelona">Barcelona (Foreign vehicles only)</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('Spain', getSelectedRegistration('spain-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>

            <!-- Bulgaria -->
            <div id="bulgaria-options" class="tab options" style="display: none;">
                <label>Select Sticker:</label><br>
                <input type="checkbox" id="Sofia" name="Sofia" value="Eco-Stickers (I and II) - Sofia">
                <label class="clickable-label" for="Sofia">Sofia</label><br>

                <div class="buttons-div">
                    <!-- Back Button -->
                    <button class="return-button" type="button" onclick="goBack()"><img
                            src="../static/general/icons8-chevron-left-16.png" alt=""></button>
                    <!-- Add Save button -->
                    <button class="save-registration-button" type="button"
                        onclick="saveRegistration('Bulgaria', getSelectedRegistration('bulgaria-options'))"><img
                            src="../static/general/icons8-double-tick-24.png" alt=""></button>
                </div>
            </div>


        </div>
        </div>

        <br />



        <!-- <div align="center">
            <button type="submit" class="btn btn-primary" id="add-car-button"> + </button>
        </div> -->
        <div class="text-right mt-3">
            <button class="save-car-button" type="submit"><span class="save-car-button-span">Car Saved </span>
                <img src="../static/general/icons8-double-tick-24.png" alt="">
            </button>
        </div>

    </form>


    <script>
        var carData = JSON.parse('{{ car_json|safe }}');
        // var carData = JSON.parse('{{ car_json|tojson|safe }}');

        console.log("json from backend: " + carData); // Print the carData object in the console
    </script>


    <script>
        // Call the function only on this specific page
        window.onload = checkAndCreateRegistrations;
    </script>




    <script>

        var models = {
            "Alfa Romeo": ["Giulia", "Stelvio"],
            "Aston Martin": ["DB11", "DBS Superleggera", "DBX", "Vantage"],
            Audi: ["A1", "A3", "A4", "A5", "A6", "A7", "A8", "Q2", "Q3", "Q5", "Q7", "Q8", "TT", "R8", "RS3", "RS4", "RS5", "RS6", "RS7", "RS Q3"],
            Bentley: ["Bentayga", "Continental", "Flying Spur"],
            BMW: ["1 Series", "2 Series", "3 Series", "4 Series", "5 Series", "6 Series", "7 Series", "8 Series", "M2", "M3", "M4", "M5", "M8", "X1", "X2", "X3", "X4", "X5", "X6", "X7", "X8", "Z4", "i3", "i4", "iX", "iX3", "iX4", "iX5", "iX6"],
            Bugatti: ["Chiron", "Divo", "La Voiture Noire"],
            Cadillac: ["CT4", "CT5", "CT6", "Escalade", "XT4", "XT5", "XT6"],
            Chevrolet: ["Blazer", "Bolt EV", "Camaro", "Colorado", "Corvette", "Equinox", "Express", "Malibu", "Silverado", "Spark", "Suburban", "Tahoe", "Trailblazer", "Traverse", "Trax"],
            Chrysler: ["300"],
            Dacia: ["Duster", "Dokker", "Sandero", "Logan", "Lodgy", "Spring", "Jogger"],
            Dodge: ["Challenger", "Charger", "Durango"],
            Ferrari: ["488", "812 Superfast", "GTC4Lusso", "Portofino", "Roma", "SF90 Stradale"],
            Fiat: ["500", "500L", "500X"],
            Ford: ["Bronco", "Bronco Sport", "Edge", "Escape", "Expedition", "Explorer", "F-150", "F-250", "F-350", "F-450", "Fusion", "Mustang", "Ranger", "Transit Connect"],
            Genesis: ["G70", "G80", "G90"],
            GMC: ["Acadia", "Canyon", "Sierra 1500", "Sierra 2500HD", "Sierra 3500HD", "Terrain", "Yukon", "Yukon XL"],
            Honda: ["Accord", "Civic", "Clarity", "CR-V", "Fit", "HR-V", "Insight", "Odyssey", "Passport", "Pilot", "Ridgeline"],
            Hummer: ["H2", "H3"],
            Hyundai: ["Accent", "Elantra", "Elantra GT", "Kona", "Nexo", "Palisade", "Santa Fe", "Sonata", "Tucson", "Veloster"],
            Infiniti: ["Q50", "Q60", "Q70", "QX30", "QX50", "QX55", "QX60", "QX80"],
            Isuzu: ["Ascender", "i-Series", "NPR", "NQR", "NRR"],
            Jaguar: ["E-Pace", "F-Pace", "F-Type", "I-Pace", "XE", "XF", "XJ"],
            Jeep: ["Cherokee", "Compass", "Gladiator", "Grand Cherokee", "Renegade", "Wrangler"],
            Kia: ["Cadenza", "Forte", "K5", "Niro", "Optima", "Rio", "Seltos", "Sorento", "Soul", "Sportage", "Stinger"],
            Lamborghini: ["Aventador", "Huracan", "Urus"],
            LandRover: ["Defender", "Discovery", "Discovery Sport", "Range Rover", "Range Rover Evoque", "Range Rover Sport", "Range Rover Velar"],
            Lexus: ["ES", "GX", "IS", "LC", "LS", "LX", "NX", "RC", "RX", "UX"],
            Lincoln: ["Aviator", "Continental", "Corsair", "MKZ", "Nautilus", "Navigator"],
            Lotus: ["Evora", "Exige", "Elise"],
            Maserati: ["Ghibli", "Levante", "Quattroporte"],
            Mazda: ["CX-3", "CX-30", "CX-5", "CX-9", "MX-5 Miata", "Mazda2", "Mazda3", "Mazda6"],
            McLaren: ["540C", "570S", "600LT", "720S", "GT", "P1"],
            Mercedes: ["A-Class", "B-Class", "C-Class", "CL-Class", "CLA-Class", "CLS-Class", "E-Class", "G-Class", "GLA-Class", "GLB-Class", "GLC-Class", "GLE-Class", "GLS-Class", "S-Class", "SL-Class", "SLS-Class", "SLC-Class", "AMG GT", "AMG GT 4-Door", "EQB", "EQC", "EQE", "EQS", "Metris", "Sprinter"],
            Mercury: ["Grand Marquis", "Mariner", "Milan", "Montego", "Mountaineer", "Sable"],
            Mini: ["Clubman", "Convertible", "Countryman", "Hardtop 2 Door", "Hardtop 4 Door"],
            Mitsubishi: ["Eclipse Cross", "Mirage", "Outlander", "Outlander Sport"],
            Nissan: ["370Z", "Altima", "Armada", "Frontier", "Kicks", "Leaf", "Maxima", "Murano", "NV", "Pathfinder", "Rogue", "Rogue Sport", "Sentra", "Titan", "Versa"],
            Oldsmobile: ["Alero", "Aurora", "Bravada", "Cutlass", "Intrigue", "Silhouette"],
            Pontiac: ["G5", "G6", "G8", "Solstice", "Vibe"],
            Porsche: ["911", "718 Boxster", "718 Cayman", "Cayenne", "Macan", "Panamera", "Taycan"],
            RollsRoyce: ["Cullinan", "Dawn", "Ghost", "Phantom", "Wraith"],
            Saab: ["9-3", "9-5"],
            Saturn: ["Aura", "Ion", "Outlook", "Sky", "Vue"],
            Scion: ["FR-S", "iA", "iM", "iQ", "tC", "xD"],
            Smart: ["ForTwo", "Roadster", "ForFour"],
            Subaru: ["Ascent", "BRZ", "Crosstrek", "Forester", "Impreza", "Legacy", "Outback", "WRX", "XV Crosstrek"],
            Suzuki: ["Equator", "Grand Vitara", "Kizashi", "SX4", "XL7"],
            Tesla: ["Model 3", "Model S", "Model X", "Model Y", "Roadster"],
            Toyota: ["86", "4Runner", "Avalon", "C-HR", "Camry", "Corolla", "GR Supra", "Highlander", "Land Cruiser", "Mirai", "Prius", "RAV4", "Sequoia", "Sienna", "Tacoma", "Tundra", "Venza", "Yaris", "Yaris Cross"],
            Volkswagen: ["Arteon", "Atlas", "Atlas Cross Sport", "Golf", "ID.4", "Jetta", "Passat", "Taos", "Tiguan", "Touareg"],
            Volvo: ["S60", "S90", "V60", "V90", "XC40", "XC60", "XC90"]
        };


        function populateBrands() {
            var brandSelect = document.getElementById("brand");
            brandSelect.innerHTML = ""; // Clear existing options

            // Add options for each brand
            for (var brand in models) {
                var option = document.createElement("option");
                option.value = brand;
                option.text = brand;
                brandSelect.appendChild(option);
            }

            // Pre-select the current brand if it exists
            var currentBrand = "{{ car.brand }}";
            if (currentBrand) {
                brandSelect.value = currentBrand;
                populateModels();
            }
        }

        function populateModels() {
            var brandSelect = document.getElementById("brand");
            var modelSelect = document.getElementById("model");

            // Get the selected brand
            var selectedBrand = brandSelect.value;

            // Clear previous options
            modelSelect.innerHTML = "<option value=''>Select Model</option>";

            // Populate model dropdown with models corresponding to the selected brand
            if (models[selectedBrand]) {
                models[selectedBrand].forEach(function (model) {
                    var option = document.createElement("option");
                    option.value = model;
                    option.text = model;
                    modelSelect.appendChild(option);
                });

                // Pre-select the current model if it exists
                var currentModel = "{{ car.model }}";
                if (currentModel) {
                    modelSelect.value = currentModel;
                }
            }
        }

        // Event listener for changes in the brand dropdown
        document.getElementById("brand").addEventListener("change", function () {
            document.getElementById("model").value = ""; // Clear current model selection
            populateModels();
        });

        // Initial population based on the current brand and model
        document.addEventListener("DOMContentLoaded", function () {
            populateBrands();
        });







        function toggleMenu(menuId) {
            var menu = document.getElementById(menuId);
            if (menu.style.display === "none" || menu.style.display === "") {
                menu.style.display = "block";
            } else {
                menu.style.display = "none";
            }
        }

        // Update the toggleCheckbox function
        function toggleCheckbox(optionId) {
            var checkbox = document.getElementById(optionId);
            checkbox.checked = !checkbox.checked;

            var option = checkbox.previousElementSibling; // Get the div element before the checkbox
            if (checkbox.checked) {
                option.classList.add('selected'); // Add the 'selected' class if checkbox is checked
            } else {
                option.classList.remove('selected'); // Remove the 'selected' class if checkbox is unchecked
            }

            // Update the text based on selected options
            updateSelectedText();
        }

        // Add a function to update the selected text
        function updateSelectedText() {
            var selectedOptions = document.querySelectorAll('.options div.selected');
            var selectedText = document.querySelector('.selected-options span:first-child');
            if (selectedOptions.length > 0) {
                selectedText.textContent = selectedOptions.length + ' selected';
            } else {
                selectedText.textContent = 'Select registrations';
            }
        }

        // Add an event listener to close the dropdown menu when clicking outside of it
        document.addEventListener('click', function (event) {
            var menu = document.getElementById('registrationOptions');
            var target = event.target;
            if (!menu.contains(target) && target !== menu && target !== document.querySelector('.selected-options')) {
                menu.style.display = 'none';
            }
        });

    </script>

</body>
{% endblock %}